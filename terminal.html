---
layout: vimdoc
helpname: 'terminal'
---
<div id='vimCodeElement'>
<a class="Constant" href="terminal.html" name="terminal.txt">terminal.txt</a>&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim version 8.1.</span>&nbsp;&nbsp;Last change: 2018 May 17<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Identifier">VIM REFERENCE MANUAL&nbsp;&nbsp;&nbsp;&nbsp;by Bram Moolenaar</span><br>
<br>
<br>
Terminal window support&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal" name="terminal">terminal</a>&nbsp;<a class="Constant" href="terminal.html#terminal-window" name="terminal-window">terminal-window</a><br>
<br>
<br>
The terminal feature is optional, use this to check if your Vim has it:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo has('terminal')</div>
If the result is &quot;1&quot; you have it.<br>
<br>
<br>
1. Basic use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-use">terminal-use</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Typing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-typing">terminal-typing</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size and color&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-size-color">terminal-size-color</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Syntax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#:terminal">:terminal</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resizing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-resizing">terminal-resizing</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terminal Modes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#Terminal-mode">Terminal-mode</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-cursor-style">terminal-cursor-style</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Special keys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-special-keys">terminal-special-keys</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-session">terminal-session</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-unix">terminal-unix</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MS-Windows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-ms-windows">terminal-ms-windows</a><br>
2. Terminal communication&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-communication">terminal-communication</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vim to job: term_sendkeys()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-to-job">terminal-to-job</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Job to Vim&#0058; JSON API&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-api">terminal-api</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Using the client-server feature&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-client-server">terminal-client-server</a><br>
3. Remote testing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-testing">terminal-testing</a><br>
4. Diffing screen dumps&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-diff">terminal-diff</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writing a screen dump test for Vim&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-dumptest">terminal-dumptest</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creating a screen dump&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-screendump">terminal-screendump</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comparing screen dumps&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-diffscreendump">terminal-diffscreendump</a><br>
5. Debugging&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#terminal-debug">terminal-debug</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-starting">termdebug-starting</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Example session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-example">termdebug-example</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stepping through code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-stepping">termdebug-stepping</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inspecting variables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-variables">termdebug-variables</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other commands&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-commands">termdebug-commands</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Communication&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-communication">termdebug-communication</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Customizing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="terminal.html#termdebug-customizing">termdebug-customizing</a><br>
<br>
<span class="Special">{Vi does not have any of these commands}</span><br>
<span class="Special">{only available when compiled with the&nbsp;</span><a class="Identifier" href="various.html#+terminal">+terminal</a><span class="Special">&nbsp;feature}</span><br>
The terminal feature requires the&nbsp;<a class="Identifier" href="various.html#+multi_byte">+multi_byte</a>,&nbsp;<a class="Identifier" href="various.html#+job">+job</a>&nbsp;and&nbsp;<a class="Identifier" href="various.html#+channel">+channel</a>&nbsp;features.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
1. Basic use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-use" name="terminal-use">terminal-use</a><br>
<br>
This feature is for running a terminal emulator in a Vim window.&nbsp;&nbsp;A job can be<br>
started connected to the terminal emulator. For example, to run a shell:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp; :term bash</div>
<br>
Or to run build command:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp; :term make myprogram</div>
<br>
The job runs asynchronously from Vim, the window will be updated to show<br>
output from the job, also while editing in another window.<br>
<br>
<br>
<span class="PreProc">Typing</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-typing" name="terminal-typing">terminal-typing</a><br>
When the keyboard focus is in the terminal window, typed keys will be sent to<br>
the job.&nbsp;&nbsp;This uses a pty when possible.&nbsp;&nbsp;You can click outside of the<br>
terminal window to move keyboard focus elsewhere.<br>
<br>
<span class="Special">CTRL-W</span>&nbsp;can be used to navigate between windows and other&nbsp;<span class="Special">CTRL-W</span>&nbsp;commands, e.g.:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-W</span>&nbsp;&nbsp; move focus to the next window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enter an Ex command<br>
See&nbsp;<a class="Identifier" href="vimindex.html#CTRL-W">CTRL-W</a>&nbsp;for more commands.<br>
<br>
Special in the terminal window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#CTRL-W_." name="CTRL-W_.">CTRL-W_.</a>&nbsp;&nbsp;<a class="Constant" href="terminal.html#CTRL-W_N" name="CTRL-W_N">CTRL-W_N</a>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;send a&nbsp;<span class="Special">CTRL-W</span>&nbsp;to the job in the terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-\</span>&nbsp;&nbsp; send a&nbsp;<span class="Special">CTRL-\</span>&nbsp;to the job in the terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">N</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go to Terminal-Normal mode, see&nbsp;<a class="Identifier" href="terminal.html#Terminal-mode">Terminal-mode</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-\</span>&nbsp;<span class="Special">CTRL-N</span>&nbsp;&nbsp; go to Terminal-Normal mode, see&nbsp;<a class="Identifier" href="terminal.html#Terminal-mode">Terminal-mode</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;&quot;&nbsp;<span class="Special">{reg}</span>&nbsp;&nbsp;paste register&nbsp;<span class="Special">{reg}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#CTRL-W_quote" name="CTRL-W_quote">CTRL-W_quote</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Also works with the = register to insert the result of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evaluating an expression.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-C</span>&nbsp;&nbsp; ends the job, see below&nbsp;<a class="Identifier" href="terminal.html#t_CTRL-W_CTRL-C">t_CTRL-W_CTRL-C</a><br>
<br>
See option&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;for specifying another key instead of&nbsp;<span class="Special">CTRL-W</span>&nbsp;that<br>
will work like&nbsp;<span class="Special">CTRL-W</span>.&nbsp;&nbsp;However, typing&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;twice sends&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a><br>
to the job.&nbsp;&nbsp;For example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<span class="Special">CTRL-W</span>&nbsp;&nbsp;&nbsp;&nbsp;move focus to the next window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enter an Ex command<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;send&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;to the job in the terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; send a&nbsp;<span class="Special">CTRL-W</span>&nbsp;to the job in the terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<span class="Special">N</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; go to terminal Normal mode, see below<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<span class="Special">CTRL-N</span>&nbsp;&nbsp;&nbsp;&nbsp;same as&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">N</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<span class="Special">CTRL-C</span>&nbsp;&nbsp;&nbsp;&nbsp;same as&nbsp;<a class="Identifier" href="terminal.html#t_CTRL-W_CTRL-C">t_CTRL-W_CTRL-C</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#t_CTRL-\_CTRL-N" name="t_CTRL-\_CTRL-N">t_CTRL-\_CTRL-N</a><br>
The special key combination&nbsp;<span class="Special">CTRL-\</span>&nbsp;<span class="Special">CTRL-N</span>&nbsp;can be used to switch to Normal<br>
mode, just like this works in any other mode.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#t_CTRL-W_CTRL-C" name="t_CTRL-W_CTRL-C">t_CTRL-W_CTRL-C</a><br>
<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-C</span>&nbsp;can be typed to forcefully end the job.&nbsp;&nbsp;On MS-Windows a<br>
<span class="Special">CTRL-B</span>REAK will also kill the job.<br>
<br>
If you type&nbsp;<span class="Special">CTRL-C</span>&nbsp;the effect depends on what the pty has been configured to<br>
do.&nbsp;&nbsp;For simple commands this causes a SIGINT to be sent to the job, which<br>
would end it.&nbsp;&nbsp;Other commands may ignore the SIGINT or handle the&nbsp;<span class="Special">CTRL-C</span><br>
themselves (like Vim does).<br>
<br>
To change the keys you type use terminal mode mappings, see&nbsp;<a class="Identifier" href="map.html#:tmap">:tmap</a>.<br>
These are defined like any mapping, but apply only when typing keys that are<br>
sent to the job running in the terminal.&nbsp;&nbsp;For example, to make F1 switch<br>
to Terminal-Normal mode:<br>
<div class="helpExample">&nbsp;&nbsp; tnoremap &lt;F1&gt; &lt;C-W&gt;N</div>
You can use Esc, but you need to make sure it won't cause other keys to<br>
break:<br>
<div class="helpExample">&nbsp;&nbsp; tnoremap &lt;Esc&gt; &lt;C-W&gt;N<br>
&nbsp;&nbsp; set notimeout ttimeout timeoutlen=100</div>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#options-in-terminal" name="options-in-terminal">options-in-terminal</a><br>
After opening the terminal window and setting&nbsp;<a class="Type" href="options.html#'buftype'">'buftype'</a>&nbsp;to &quot;terminal&quot; the<br>
BufWinEnter autocommand event is triggered.&nbsp;&nbsp;This makes it possible to set<br>
options specifically for the window and buffer.&nbsp;&nbsp;Example:<br>
<div class="helpExample">&nbsp;&nbsp; au BufWinEnter * if &amp;buftype == 'terminal' | setlocal bufhidden=hide | endif</div>
<br>
Mouse events (click and drag) are passed to the terminal.&nbsp;&nbsp;Mouse move events<br>
are only passed when Vim itself is receiving them.&nbsp;&nbsp;For a terminal that is<br>
when&nbsp;<a class="Type" href="options.html#'balloonevalterm'">'balloonevalterm'</a>&nbsp;is enabled.<br>
<br>
<br>
<span class="PreProc">Size and color</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-size-color" name="terminal-size-color">terminal-size-color</a><br>
See option&nbsp;<a class="Type" href="options.html#'termwinsize'">'termwinsize'</a>&nbsp;for controlling the size of the terminal window.<br>
(TODO: scrolling when the terminal is larger than the window)<br>
<br>
The job running in the terminal can change the colors.&nbsp;&nbsp;The default foreground<br>
and background colors are taken from Vim, the Normal highlight group.<br>
<br>
For a color terminal the&nbsp;<a class="Type" href="options.html#'background'">'background'</a>&nbsp;option is used to decide whether the<br>
terminal window will start with a white or black background.<br>
<br>
To use a different color the Terminal highlight group can be used, for<br>
example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;hi Terminal ctermbg=lightgrey ctermfg=blue guibg=lightgrey guifg=blue</div>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#g:terminal_ansi_colors" name="g:terminal_ansi_colors">g:terminal_ansi_colors</a><br>
In GUI mode or with&nbsp;<a class="Type" href="options.html#'termguicolors'">'termguicolors'</a>, the 16 ANSI colors used by default in new<br>
terminal windows may be configured using the variable<br>
<a class="Comment" href="terminal.html#g:terminal_ansi_colors">g:terminal_ansi_colors</a>, which should be a list of 16 color names or<br>
hexadecimal color codes, similar to those accepted by&nbsp;<a class="Identifier" href="syntax.html#highlight-guifg">highlight-guifg</a>.&nbsp;&nbsp;When<br>
not using GUI colors, the terminal window always uses the 16 ANSI colors of<br>
the underlying terminal.<br>
The&nbsp;<a class="Identifier" href="eval.html#term_setansicolors()">term_setansicolors()</a>&nbsp;function can be used to change the colors, and<br>
<a class="Identifier" href="eval.html#term_getansicolors()">term_getansicolors()</a>&nbsp;to get the currently used colors.<br>
<br>
<br>
<span class="PreProc">Syntax</span><br>
<br>
:<span class="Special">[range]</span>ter[minal]&nbsp;<span class="Special">[options]</span>&nbsp;<span class="Special">[command]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:ter" name=":ter">:ter</a>&nbsp;<a class="Constant" href="terminal.html#:terminal" name=":terminal">:terminal</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open a new terminal window.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is provided run it as a job and connect<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the input and output to the terminal.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is not given the&nbsp;<a class="Type" href="options.html#'shell'">'shell'</a>&nbsp;option is used.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;<span class="Special">[command]</span>&nbsp;is NONE no job is started, the pty of the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;terminal can be used by a command like gdb.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is missing the default behavior is to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close the terminal when the shell exits.&nbsp;&nbsp;This can be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed with the ++noclose argument.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[command]</span>&nbsp;is present the default behavior is to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keep the terminal open in Terminal-Normal mode.&nbsp;&nbsp;This<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can be changed with the ++close argument.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A new buffer will be created, using&nbsp;<span class="Special">[command]</span>&nbsp;or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'shell'">'shell'</a>&nbsp;as the name, prefixed with a &quot;!&quot;.&nbsp;&nbsp;If a buffer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by this name already exists a number is added in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentheses.&nbsp;&nbsp;E.g. if &quot;gdb&quot; exists the second terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer will use &quot;!gdb (1)&quot;.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;<span class="Special">[range]</span>&nbsp;is given the specified lines are used as<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input for the job.&nbsp;&nbsp;It will not be possible to type<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys in the terminal window.&nbsp;&nbsp;For MS-Windows see the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++eof argument below.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#term++close" name="term++close">term++close</a>&nbsp;<a class="Constant" href="terminal.html#term++open" name="term++open">term++open</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Supported&nbsp;<span class="Special">[options]</span>&nbsp;are:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++close&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The terminal window will close<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;automatically when the job terminates.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++noclose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The terminal window will NOT close<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;automatically when the job terminates.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When the job terminates and no window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shows it, a window will be opened.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>&nbsp;that this can be interruptive.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The last of ++close, ++noclose and ++open<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matters and rules out earlier arguments.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++curwin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open the terminal in the current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window, do not split the current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.&nbsp;&nbsp;Fails if the current buffer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cannot be&nbsp;<a class="Identifier" href="editing.html#abandon">abandon</a>ed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++hidden&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open the terminal in a hidden buffer,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no window will be used.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++norestore&nbsp;&nbsp;&nbsp;&nbsp; Do not include this terminal window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a session file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++kill=<span class="Special">{how}</span>&nbsp;&nbsp;&nbsp;&nbsp;When trying to close the terminal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window kill the job with&nbsp;<span class="Special">{how}</span>.&nbsp;&nbsp;See<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="eval.html#term_setkill()">term_setkill()</a>&nbsp;for the values.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++rows=<span class="Special">{height}</span>&nbsp;Use&nbsp;<span class="Special">{height}</span>&nbsp;for the terminal window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height.&nbsp;&nbsp;If the terminal uses the full<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vim height (no window above or below<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the terminal window) the command line<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height will be reduced as needed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++cols=<span class="Special">{width}</span>&nbsp;&nbsp;Use&nbsp;<span class="Special">{width}</span>&nbsp;for the terminal window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width. If the terminal uses the full<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vim width (no window left or right of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the terminal window) this value is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignored.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++eof=<span class="Special">{text}</span>&nbsp;&nbsp;&nbsp;&nbsp;when using&nbsp;<span class="Special">[range]</span>: text to send after<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the last line was written. Cannot<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contain white space.&nbsp;&nbsp;A CR is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appended.&nbsp;&nbsp;For MS-Windows the default<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is to send&nbsp;<span class="Special">CTRL-D</span>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E.g. for a shell use &quot;++eof=exit&quot; and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for Python &quot;++eof=exit()&quot;.&nbsp;&nbsp;Special<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codes can be used like with&nbsp;<a class="Comment" href="map.html#:map">:map</a>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.g. &quot;<span class="Special">&lt;C-Z&gt;</span>&quot; for&nbsp;<span class="Special">CTRL-Z</span>.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If you want to use more options use the&nbsp;<a class="Identifier" href="eval.html#term_start()">term_start()</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function.<br>
<br>
When the buffer associated with the terminal is forcibly unloaded or wiped out<br>
the job is killed, similar to calling&nbsp;<span class="Comment">job_stop(job, &quot;kill&quot;)</span>&nbsp;.<br>
Closing the window normally results in&nbsp;<a class="Identifier" href="terminal.html#E947">E947</a>.&nbsp;&nbsp;When a kill method was set<br>
with &quot;++kill=<span class="Special">{how}</span>&quot; or&nbsp;<a class="Identifier" href="eval.html#term_setkill()">term_setkill()</a>&nbsp;then closing the window will use that<br>
way to kill or interrupt the job.&nbsp;&nbsp;For example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:term ++kill=term tail -f /tmp/log</div>
<br>
So long as the job is running the window behaves like it contains a modified<br>
buffer.&nbsp;&nbsp;Trying to close the window with&nbsp;<span class="Comment">CTRL-W :quit</span>&nbsp;fails.&nbsp;&nbsp;When using<br>
<span class="Comment">CTRL-W :quit!</span>&nbsp;the job is ended.&nbsp;&nbsp;The text in the window is lost.&nbsp;&nbsp;The buffer<br>
still exists, but getting it in a window with&nbsp;<a class="Comment" href="windows.html#:buffer">:buffer</a>&nbsp;will show an empty<br>
buffer.<br>
<br>
Trying to close the window with&nbsp;<span class="Comment">CTRL-W :close</span>&nbsp;also fails.&nbsp;&nbsp; Using<br>
<span class="Comment">CTRL-W :close!</span>&nbsp;will close the window and make the buffer hidden.<br>
<br>
You can use&nbsp;<span class="Comment">CTRL-W :hide</span>&nbsp;to close the terminal window and make the buffer<br>
hidden, the job keeps running.&nbsp;&nbsp;The&nbsp;<a class="Comment" href="windows.html#:buffer">:buffer</a>&nbsp;command can be used to turn the<br>
current window into a terminal window.&nbsp;&nbsp;If there are unsaved changes this<br>
fails, use ! to force, as usual.<br>
<br>
To have a background job run without a window, and open the window when it's<br>
done, use options like this:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:term ++hidden ++open make</div>
<span class="Todo">Note</span>&nbsp;that the window will open at an unexpected moment, this will interrupt<br>
what you are doing.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#E947" name="E947">E947</a>&nbsp;<a class="Constant" href="terminal.html#E948" name="E948">E948</a><br>
So long as the job is running, the buffer is considered modified and Vim<br>
cannot be quit easily, see&nbsp;<a class="Identifier" href="editing.html#abandon">abandon</a>.<br>
<br>
When the job has finished and no changes were made to the buffer: closing the<br>
window will wipe out the buffer.<br>
<br>
Before changes can be made to a terminal buffer, the&nbsp;<a class="Type" href="options.html#'modifiable'">'modifiable'</a>&nbsp;option must<br>
be set.&nbsp;&nbsp;This is only possible when the job has finished.&nbsp;&nbsp;At the first change<br>
the buffer will become a normal buffer and the highlighting is removed.<br>
You may want to change the buffer name with&nbsp;<a class="Identifier" href="editing.html#:file">:file</a>&nbsp;to be able to write, since<br>
the buffer name will still be set to the command.<br>
<br>
<br>
<span class="PreProc">Resizing</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-resizing" name="terminal-resizing">terminal-resizing</a><br>
The size of the terminal can be in one of three modes:<br>
<br>
1. The&nbsp;<a class="Type" href="options.html#'termwinsize'">'termwinsize'</a>&nbsp;option is empty: The terminal size follows the window<br>
&nbsp;&nbsp; size.&nbsp;&nbsp;The minimal size is 2 screen lines with 10 cells.<br>
<br>
2. The&nbsp;<a class="Type" href="options.html#'termwinsize'">'termwinsize'</a>&nbsp;option is &quot;rows*cols&quot;, where &quot;rows&quot; is the minimal number<br>
&nbsp;&nbsp; of screen rows and &quot;cols&quot; is the minimal number of cells.<br>
<br>
3. The&nbsp;<a class="Type" href="options.html#'termwinsize'">'termwinsize'</a>&nbsp;option is &quot;rowsXcols&quot; (where the x is upper or lower<br>
&nbsp;&nbsp; case).&nbsp;&nbsp;The terminal size is fixed to the specified number of screen lines<br>
&nbsp;&nbsp; and cells.&nbsp;&nbsp;If the window is bigger there will be unused empty space.<br>
<br>
If the window is smaller than the terminal size, only part of the terminal can<br>
be seen (the lower-left part).<br>
<br>
The&nbsp;<a class="Identifier" href="eval.html#term_getsize()">term_getsize()</a>&nbsp;function can be used to get the current size of the<br>
terminal.&nbsp;&nbsp;<a class="Identifier" href="eval.html#term_setsize()">term_setsize()</a>&nbsp;can be used only when in the first or second mode,<br>
not when&nbsp;<a class="Type" href="options.html#'termwinsize'">'termwinsize'</a>&nbsp;is &quot;rowsXcols&quot;.<br>
<br>
<br>
<span class="PreProc">Terminal-Job and Terminal-Normal mode</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#Terminal-mode" name="Terminal-mode">Terminal-mode</a>&nbsp;<a class="Constant" href="terminal.html#Terminal-Job" name="Terminal-Job">Terminal-Job</a><br>
When the job is running the contents of the terminal is under control of the<br>
job.&nbsp;&nbsp;That includes the cursor position.&nbsp;&nbsp;Typed keys are sent to the job.<br>
The terminal contents can change at any time.&nbsp;&nbsp;This is called Terminal-Job<br>
mode.<br>
<br>
Use&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">N</span>&nbsp;(or&nbsp;<a class="Type" href="options.html#'termwinkey'">'termwinkey'</a>&nbsp;<span class="Special">N</span>) to switch to Terminal-Normal mode.&nbsp;&nbsp;Now the<br>
contents of the terminal window is under control of Vim, the job output is<br>
suspended.&nbsp;&nbsp;<span class="Special">CTRL-\</span>&nbsp;<span class="Special">CTRL-N</span>&nbsp;does the same.<br>
<br>
Terminal-Job mode is where&nbsp;<a class="Identifier" href="map.html#:tmap">:tmap</a>&nbsp;mappings are applied. Keys sent by<br>
<a class="Identifier" href="eval.html#term_sendkeys()">term_sendkeys()</a>&nbsp;are not subject to tmap, but keys from&nbsp;<a class="Identifier" href="eval.html#feedkeys()">feedkeys()</a>&nbsp;are.<br>
<br>
It is not possible to enter Insert mode from Terminal-Job mode.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#Terminal-Normal" name="Terminal-Normal">Terminal-Normal</a>&nbsp;<a class="Constant" href="terminal.html#E946" name="E946">E946</a><br>
In Terminal-Normal mode you can move the cursor around with the usual Vim<br>
commands, Visually mark text, yank text, etc.&nbsp;&nbsp;But you cannot change the<br>
contents of the buffer.&nbsp;&nbsp;The commands that would start insert mode, such as<br>
'i' and 'a', return to Terminal-Job mode.&nbsp;&nbsp;The window will be updated to show<br>
the contents of the terminal.&nbsp;<a class="Identifier" href="insert.html#:startinsert">:startinsert</a>&nbsp;is ineffective.<br>
<br>
In Terminal-Normal mode the statusline and window title show &quot;(Terminal)&quot;.&nbsp;&nbsp;If<br>
the job ends while in Terminal-Normal mode this changes to<br>
&quot;(Terminal-finished)&quot;.<br>
<br>
When the job outputs lines in the terminal, such that the contents scrolls off<br>
the top, those lines are remembered and can be seen in Terminal-Normal mode.<br>
The number of lines is limited by the&nbsp;<a class="Type" href="options.html#'termwinscroll'">'termwinscroll'</a>&nbsp;option. When going over<br>
this limit, the first 10% of the scrolled lines are deleted and are lost.<br>
<br>
<br>
<span class="PreProc">Cursor style</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-cursor-style" name="terminal-cursor-style">terminal-cursor-style</a><br>
By default the cursor in the terminal window uses a not blinking block.&nbsp;&nbsp;The<br>
normal xterm escape sequences can be used to change the blinking state and the<br>
shape.&nbsp;&nbsp;Once focus leaves the terminal window Vim will restore the original<br>
cursor.<br>
<br>
An exception is when xterm is started with the &quot;-bc&quot; argument, or another way<br>
that causes the cursor to blink.&nbsp;&nbsp;This actually means that the blinking flag<br>
is inverted.&nbsp;&nbsp;Since Vim cannot detect this, the terminal window cursor<br>
blinking will also be inverted.<br>
<br>
<br>
<span class="PreProc">Session</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-session" name="terminal-session">terminal-session</a><br>
A terminal window will be restored when using a session file, if possible and<br>
wanted.<br>
<br>
If &quot;terminal&quot; was removed from&nbsp;<a class="Type" href="options.html#'sessionoptions'">'sessionoptions'</a>&nbsp;then no terminal windows will<br>
be restored.<br>
<br>
If the job in the terminal was finished the window will not be restored.<br>
<br>
If the terminal can be restored, the command that was used to open it will be<br>
used again.&nbsp;&nbsp;To change this use the&nbsp;<a class="Identifier" href="eval.html#term_setrestore()">term_setrestore()</a>&nbsp;function.&nbsp;&nbsp;This can<br>
also be used to not restore a specific terminal by setting the command to<br>
&quot;NONE&quot;.<br>
<br>
<br>
<span class="PreProc">Special keys</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-special-keys" name="terminal-special-keys">terminal-special-keys</a><br>
Since the terminal emulator simulates an xterm, only escape sequences that<br>
both Vim and xterm recognize will be available in the terminal window.&nbsp;&nbsp;If you<br>
want to pass on other escape sequences to the job running in the terminal you<br>
need to set up forwarding.&nbsp;&nbsp;Example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmap &lt;expr&gt; &lt;Esc&gt;]b SendToTerm(&quot;\&lt;Esc&gt;]b&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func SendToTerm(what)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_sendkeys('', a:what)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ''<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endfunc</div>
<br>
<br>
<span class="PreProc">Unix</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-unix" name="terminal-unix">terminal-unix</a><br>
On Unix a pty is used to make it possible to run all kinds of commands.&nbsp;&nbsp;You<br>
can even run Vim in the terminal!&nbsp;&nbsp;That's used for debugging, see below.<br>
<br>
Environment variables are used to pass information to the running job:<br>
&nbsp;&nbsp;&nbsp;&nbsp;TERM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the name of the terminal, from the&nbsp;<a class="Type" href="options.html#'term'">'term'</a>&nbsp;option or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$TERM in the GUI; falls back to &quot;xterm&quot; if it does not<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start with &quot;xterm&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ROWS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number of rows in the terminal initially<br>
&nbsp;&nbsp;&nbsp;&nbsp;LINES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; same as ROWS<br>
&nbsp;&nbsp;&nbsp;&nbsp;COLUMNS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number of columns in the terminal initially<br>
&nbsp;&nbsp;&nbsp;&nbsp;COLORS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number of colors,&nbsp;<a class="Type" href="term.html#'t_Co'">'t_Co'</a>&nbsp;(256*256*256 in the GUI)<br>
&nbsp;&nbsp;&nbsp;&nbsp;VIM_SERVERNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:servername<br>
<br>
<br>
<span class="PreProc">MS-Windows</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-ms-windows" name="terminal-ms-windows">terminal-ms-windows</a><br>
On MS-Windows winpty is used to make it possible to run all kind of commands.<br>
Obviously, they must be commands that run in a terminal, not open their own<br>
window.<br>
<br>
You need the following two files from winpty:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;winpty.dll<br>
&nbsp;&nbsp;&nbsp;&nbsp;winpty-agent.exe<br>
<br>
You can download them from the following page:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="https://github.com/rprichard/winpty">https://github.com/rprichard/winpty</a></span><br>
<br>
Just put the files somewhere in your PATH.&nbsp;&nbsp;You can set the&nbsp;<a class="Type" href="options.html#'winptydll'">'winptydll'</a>&nbsp;option<br>
to point to the right file, if needed.&nbsp;&nbsp;If you have both the 32-bit and 64-bit<br>
version, rename to winpty32.dll and winpty64.dll to match the way Vim was<br>
build.<br>
<br>
Environment variables are used to pass information to the running job:<br>
&nbsp;&nbsp;&nbsp;&nbsp;VIM_SERVERNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:servername<br>
<br>
<span class="PreProc">==============================================================================</span><br>
2. Terminal communication&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-communication" name="terminal-communication">terminal-communication</a><br>
<br>
There are several ways to communicate with the job running in a terminal:<br>
- Use&nbsp;<a class="Identifier" href="eval.html#term_sendkeys()">term_sendkeys()</a>&nbsp;to send text and escape sequences from Vim to the job.<br>
- Use the JSON API to send encoded commands from the job to Vim.<br>
- Use the&nbsp;<a class="Identifier" href="remote.html#client-server">client-server</a>&nbsp;mechanism. This works on machines with an X server<br>
&nbsp;&nbsp;and on MS-Windows.<br>
<br>
<br>
<span class="PreProc">Vim to job: term_sendkeys()</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-to-job" name="terminal-to-job">terminal-to-job</a><br>
This allows for remote controlling the job running in the terminal.&nbsp;&nbsp;It is a<br>
one-way mechanism.&nbsp;&nbsp;The job can update the display to signal back to Vim.<br>
For example, if a shell is running in a terminal, you can do:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_sendkeys(buf, &quot;ls *.java\&lt;CR&gt;&quot;)</div>
<br>
This requires for the job to be in the right state where it will do the right<br>
thing when receiving the keys.&nbsp;&nbsp;For the above example, the shell must be<br>
waiting for a command to be typed.<br>
<br>
For a job that was written for the purpose, you can use the JSON API escape<br>
sequence in the other direction.&nbsp;&nbsp;E.g.:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_sendkeys(buf, &quot;\&lt;Esc&gt;]51;[&quot;response&quot;]\x07&quot;)</div>
<br>
<br>
<span class="PreProc">Job to Vim&#0058; JSON API</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-api" name="terminal-api">terminal-api</a><br>
The job can send JSON to Vim, using a special escape sequence.&nbsp;&nbsp;The JSON<br>
encodes a command that Vim understands.&nbsp;&nbsp;Example of such a message:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Esc&gt;]51;[&quot;drop&quot;, &quot;README.md&quot;]&lt;07&gt;</div>
<br>
The body is always a list, making it easy to find the end: ]<span class="Special">&lt;07&gt;</span>.<br>
The&nbsp;<span class="Special">&lt;Esc&gt;</span>]51;msg<span class="Special">&lt;07&gt;</span>&nbsp;sequence is reserved by xterm for &quot;Emacs shell&quot;, which is<br>
similar to what we are doing here.<br>
<br>
Currently supported commands:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call&nbsp;<span class="Special">{funcname}</span>&nbsp;<span class="Special">{argument}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Call a user defined function with&nbsp;<span class="Special">{argument}</span>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The function is called with two arguments: the buffer number<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the terminal and&nbsp;<span class="Special">{argument}</span>, the decoded JSON argument.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The function name must start with &quot;Tapi_&quot; to avoid<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accidentally calling a function not meant to be used for the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;terminal API<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The user function should sanity check the argument.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The function can use&nbsp;<a class="Identifier" href="eval.html#term_sendkeys()">term_sendkeys()</a>&nbsp;to send back a reply.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Example in JSON:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&quot;call&quot;, &quot;Tapi_Impression&quot;, [&quot;play&quot;, 14]]</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Calls a function defined like this:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function Tapi_Impression(bufnum, arglist)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if len(a:arglist) == 2<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echomsg &quot;impression &quot; . a:arglist[0]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echomsg &quot;count &quot; . a:arglist[1]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endfunc</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Output from&nbsp;<a class="Comment" href="eval.html#:echo">:echo</a>&nbsp;may be erased by a redraw, use&nbsp;<a class="Comment" href="eval.html#:echomsg">:echomsg</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to be able to see it with&nbsp;<a class="Comment" href="message.html#:messages">:messages</a>.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drop&nbsp;<span class="Special">{filename}</span>&nbsp;<span class="Special">[options]</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Let Vim open a file, like the&nbsp;<a class="Comment" href="windows.html#:drop">:drop</a>&nbsp;command.&nbsp;&nbsp;If&nbsp;<span class="Special">{filename}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is already open in a window, switch to that window.&nbsp;&nbsp;Otherwise<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open a new window to edit&nbsp;<span class="Special">{filename}</span>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>&nbsp;that both the job and Vim may change the current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directory, thus it's best to use the full path.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[options]</span>&nbsp;is only used when opening a new window.&nbsp;&nbsp;If present,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it must be a Dict.&nbsp;&nbsp;Similarly to&nbsp;<a class="Identifier" href="editing.html#++opt">++opt</a>, These entries are recognized:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ff&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file format: &quot;dos&quot;, &quot;mac&quot; or &quot;unix&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;fileformat&quot;&nbsp;&nbsp;idem<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;enc&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; overrides&nbsp;<a class="Type" href="options.html#'fileencoding'">'fileencoding'</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;encoding&quot;&nbsp;&nbsp;&nbsp;&nbsp;idem<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;bin&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sets&nbsp;<a class="Type" href="options.html#'binary'">'binary'</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;binary&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idem<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;nobin&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resets&nbsp;<a class="Type" href="options.html#'binary'">'binary'</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;nobinary&quot;&nbsp;&nbsp;&nbsp;&nbsp;idem<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;bad&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; specifies behavior for bad characters, see<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="editing.html#++bad">++bad</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Example in JSON:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&quot;drop&quot;, &quot;path/file.txt&quot;, {&quot;ff&quot;: &quot;dos&quot;}]</div>
<br>
A trick to have Vim send this escape sequence:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exe &quot;set t_ts=\&lt;Esc&gt;]51; t_fs=\x07&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let &amp;titlestring = '[&quot;call&quot;,&quot;Tapi_TryThis&quot;,[&quot;hello&quot;,123]]'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redraw<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set t_ts&amp; t_fs&amp;</div>
<br>
Rationale: Why not allow for any command or expression?&nbsp;&nbsp;Because that might<br>
create a security problem.<br>
<br>
<br>
<span class="PreProc">Using the client-server feature</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-client-server" name="terminal-client-server">terminal-client-server</a><br>
This only works when v:servername is not empty.&nbsp;&nbsp;If needed you can set it,<br>
before opening the terminal, with:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call remote_startserver('vim-server')</div>
<br>
$VIM_SERVERNAME is set in the terminal to pass on the server name.<br>
<br>
In the job you can then do something like:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim --servername $VIM_SERVERNAME --remote +123 some_file.c</div>
This will open the file &quot;some_file.c&quot; and put the cursor on line 123.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
3. Remote testing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-testing" name="terminal-testing">terminal-testing</a><br>
<br>
Most Vim tests execute a script inside Vim.&nbsp;&nbsp;For some tests this does not<br>
work, running the test interferes with the code being tested.&nbsp;&nbsp;To avoid this<br>
Vim is executed in a terminal window.&nbsp;&nbsp;The test sends keystrokes to it and<br>
inspects the resulting screen state.<br>
<br>
<span class="PreProc">Functions</span><br>
<br>
term_sendkeys()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; send keystrokes to a terminal (not subject to tmap)<br>
term_wait()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait for screen to be updated<br>
term_scrape()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inspect terminal screen<br>
<br>
<br>
<span class="PreProc">==============================================================================</span><br>
4. Diffing screen dumps&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-diff" name="terminal-diff">terminal-diff</a><br>
<br>
In some cases it can be bothersome to test that Vim displays the right<br>
characters on the screen.&nbsp;&nbsp;E.g. with syntax highlighting.&nbsp;&nbsp;To make this<br>
simpler it is possible to take a screen dump of a terminal and compare it to<br>
an expected screen dump.<br>
<br>
Vim uses the window size, text, color and other attributes as displayed.&nbsp;&nbsp;The<br>
Vim screen size, font and other properties do not matter.&nbsp;&nbsp;Therefore this<br>
mechanism is portable across systems.&nbsp;&nbsp;A conventional screenshot would reflect<br>
all differences, including font size and family.<br>
<br>
<br>
<span class="PreProc">Writing a screen dump test for Vim</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-dumptest" name="terminal-dumptest">terminal-dumptest</a><br>
For an example see the Test_syntax_c() function in<br>
src/testdir/test_syntax.vim.&nbsp;&nbsp;The main parts are:<br>
- Write a file you want to test with. This is useful for testing syntax<br>
&nbsp;&nbsp;highlighting.&nbsp;&nbsp;You can also start Vim with en empty buffer.<br>
- Run Vim in a terminal with a specific size.&nbsp;&nbsp;The default is 20 lines of 75<br>
&nbsp;&nbsp;characters.&nbsp;&nbsp;This makes sure the dump is always this size.&nbsp;&nbsp;The function<br>
&nbsp;&nbsp;RunVimInTerminal() takes care of this.&nbsp;&nbsp;Pass it the arguments for the Vim<br>
&nbsp;&nbsp;command.<br>
- Send any commands to Vim using term_sendkeys().&nbsp;&nbsp;For example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_sendkeys(buf, &quot;:echo &amp;lines &amp;columns\&lt;CR&gt;&quot;)</div>
- Check that the screen is now in the expected state, using<br>
&nbsp;&nbsp;VerifyScreenDump().&nbsp;&nbsp;This expects the reference screen dump to be in the<br>
&nbsp;&nbsp;src/testdir/dumps/ directory.&nbsp;&nbsp;Pass the name without &quot;.dump&quot;.&nbsp;&nbsp;It is<br>
&nbsp;&nbsp;recommended to use the name of the test function and a sequence number, so<br>
&nbsp;&nbsp;that we know what test is using the file.<br>
- Repeat sending commands and checking the state.<br>
- Finally stop Vim by calling StopVimInTerminal().<br>
<br>
The first time you do this you won't have a screen dump yet.&nbsp;&nbsp;Create an empty<br>
file for now, e.g.:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;touch src/testdir/dumps/Test_function_name_01.dump</div>
<br>
The test will then fail, giving you the command to compare the reference dump<br>
and the failed dump, e.g.:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_dumpdiff(&quot;Test_func.dump.failed&quot;, &quot;dumps/Test_func.dump&quot;)</div>
<br>
Use this command in Vim, with the current directory set to src/testdir.<br>
Once you are satisfied with the test, move the failed dump in place of the<br>
reference:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!mv Test_func.dump.failed dumps/Test_func.dump</div>
<br>
<br>
<span class="PreProc">Creating a screen dump</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-screendump" name="terminal-screendump">terminal-screendump</a><br>
<br>
To create the screen dump, run Vim (or any other program) in a terminal and<br>
make it show the desired state.&nbsp;&nbsp;Then use the term_dumpwrite() function to<br>
create a screen dump file.&nbsp;&nbsp;For example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:call term_dumpwrite(77, &quot;mysyntax.dump&quot;)</div>
<br>
Here &quot;77&quot; is the buffer number of the terminal.&nbsp;&nbsp;Use&nbsp;<span class="Comment">:ls!</span>&nbsp;to see it.<br>
<br>
You can view the screen dump with term_dumpload():<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:call term_dumpload(&quot;mysyntax.dump&quot;)</div>
<br>
To verify that Vim still shows exactly the same screen, run Vim again with<br>
exactly the same way to show the desired state.&nbsp;&nbsp;Then create a screen dump<br>
again, using a different file name:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:call term_dumpwrite(88, &quot;test.dump&quot;)</div>
<br>
To assert that the files are exactly the same use assert_equalfile():<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call assert_equalfile(&quot;mysyntax.dump&quot;, &quot;test.dump&quot;)</div>
<br>
If there are differences then v:errors will contain the error message.<br>
<br>
<br>
<span class="PreProc">Comparing screen dumps</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-diffscreendump" name="terminal-diffscreendump">terminal-diffscreendump</a><br>
<br>
assert_equalfile() does not make it easy to see what is different.<br>
To spot the problem use term_dumpdiff():<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call term_dumpdiff(&quot;mysyntax.dump&quot;, &quot;test.dump&quot;)</div>
<br>
This will open a window consisting of three parts:<br>
1.&nbsp;&nbsp;The contents of the first dump<br>
2.&nbsp;&nbsp;The difference between the first and second dump<br>
3.&nbsp;&nbsp;The contents of the second dump<br>
<br>
You can usually see what differs in the second part.&nbsp;&nbsp;Use the&nbsp;<a class="Type" href="options.html#'ruler'">'ruler'</a>&nbsp;to<br>
relate it to the position in the first or second dump.<br>
<br>
Alternatively, press &quot;s&quot; to swap the first and second dump. Do this several<br>
times so that you can spot the difference in the context of the text.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
5. Debugging&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#terminal-debug" name="terminal-debug">terminal-debug</a>&nbsp;<a class="Constant" href="terminal.html#terminal-debugger" name="terminal-debugger">terminal-debugger</a><br>
<br>
The Terminal debugging plugin can be used to debug a program with gdb and view<br>
the source code in a Vim window.&nbsp;&nbsp;Since this is completely contained inside<br>
Vim this also works remotely over an ssh connection.<br>
<br>
<br>
<span class="PreProc">Starting</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-starting" name="termdebug-starting">termdebug-starting</a><br>
Load the plugin with this command:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;packadd termdebug</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:Termdebug" name=":Termdebug">:Termdebug</a><br>
To start debugging use&nbsp;<a class="Comment" href="terminal.html#:Termdebug">:Termdebug</a>&nbsp;or&nbsp;<a class="Comment" href="terminal.html#:TermdebugCommand">:TermdebugCommand</a>` followed by the<br>
command name, for example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Termdebug vim</div>
<br>
This opens two windows:<br>
<br>
gdb window&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A terminal window in which &quot;gdb vim&quot; is executed.&nbsp;&nbsp;Here you<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can directly interact with gdb.&nbsp;&nbsp;The buffer name is &quot;!gdb&quot;.<br>
<br>
program window&nbsp;&nbsp;A terminal window for the executed program.&nbsp;&nbsp;When &quot;run&quot; is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;used in gdb the program I/O will happen in this window, so<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that it does not interfere with controlling gdb.&nbsp;&nbsp;The buffer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name is &quot;gdb program&quot;.<br>
<br>
The current window is used to show the source code.&nbsp;&nbsp;When gdb pauses the<br>
source file location will be displayed, if possible.&nbsp;&nbsp;A sign is used to<br>
highlight the current position, using highlight group debugPC.&nbsp;&nbsp;&nbsp;<br>
<br>
If the buffer in the current window is modified, another window will be opened<br>
to display the current gdb position.&nbsp;&nbsp;You can use&nbsp;<a class="Comment" href="terminal.html#:Winbar">:Winbar</a>&nbsp;to add a window<br>
toolbar there.<br>
<br>
Focus the terminal of the executed program to interact with it.&nbsp;&nbsp;This works<br>
the same as any command running in a terminal window.<br>
<br>
When the debugger ends, typically by typing &quot;quit&quot; in the gdb window, the two<br>
opened windows are closed.<br>
<br>
Only one debugger can be active at a time.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:TermdebugCommand" name=":TermdebugCommand">:TermdebugCommand</a><br>
If you want to give specific commands to the command being debugged, you can<br>
use the&nbsp;<a class="Comment" href="terminal.html#:TermdebugCommand">:TermdebugCommand</a>&nbsp;command followed by the command name and<br>
additional parameters.<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:TermdebugCommand vim --clean -c ':set nu'</div>
<br>
Both the&nbsp;<a class="Comment" href="terminal.html#:Termdebug">:Termdebug</a>&nbsp;and&nbsp;<a class="Comment" href="terminal.html#:TermdebugCommand">:TermdebugCommand</a>&nbsp;support an optional &quot;!&quot; bang<br>
argument to start the command right away, without pausing at the gdb window<br>
(and cursor will be in the debugged window).&nbsp;&nbsp;For example:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:TermdebugCommand! vim --clean</div>
<br>
To attach gdb to an already running executable or use a core file, pass extra<br>
arguments.&nbsp;&nbsp;E.g.:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Termdebug vim core<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Termdebug vim 98343</div>
<br>
If no argument is given, you'll end up in a gdb window, in which you need to<br>
specify which command to run using e.g. the gdb&nbsp;<a class="Comment" href="editing.html#:file">file</a>&nbsp;command.<br>
<br>
<br>
<span class="PreProc">Example session</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-example" name="termdebug-example">termdebug-example</a><br>
Start in the Vim &quot;src&quot; directory and build Vim&#0058;<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% make</div>
Start Vim&#0058;<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% ./vim</div>
Load the termdebug plugin and start debugging Vim&#0058;<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:packadd termdebug<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Termdebug vim</div>
You should now have three windows:<br>
&nbsp;&nbsp;&nbsp;&nbsp;source&nbsp;&nbsp;- where you started, has a window toolbar with buttons<br>
&nbsp;&nbsp;&nbsp;&nbsp;gdb&nbsp;&nbsp;&nbsp;&nbsp; - you can type gdb commands here<br>
&nbsp;&nbsp;&nbsp;&nbsp;program - the executed program will use this window<br>
<br>
You can use&nbsp;<span class="Special">CTRL-W</span>&nbsp;<span class="Special">CTRL-W</span>&nbsp;or the mouse to move focus between windows.<br>
Put focus on the gdb window and type:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break ex_help<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run</div>
Vim will start running in the program window. Put focus there and type:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:help gui</div>
Gdb will run into the ex_help breakpoint.&nbsp;&nbsp;The source window now shows the&nbsp;<br>
ex_cmds.c file.&nbsp;&nbsp;A &quot;&gt;&gt;&quot; marker will appear where the breakpoint was set.&nbsp;&nbsp;The<br>
line where the debugger stopped is highlighted.&nbsp;&nbsp;You can now step through the<br>
program.&nbsp;&nbsp;Let's use the mouse: click on the &quot;Next&quot; button in the window<br>
toolbar.&nbsp;&nbsp;You will see the highlighting move as the debugger executes a line<br>
of source code.<br>
<br>
Click &quot;Next&quot; a few times until the for loop is highlighted.&nbsp;&nbsp;Put the cursor on<br>
the end of &quot;eap-&gt;arg&quot;, then click &quot;Eval&quot; in the toolbar.&nbsp;&nbsp;You will see this<br>
displayed:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&quot;eap-&gt;arg&quot;: 0x555555e68855 &quot;gui&quot;</span><br>
This way you can inspect the value of local variables.&nbsp;&nbsp;You can also focus the<br>
gdb window and use a &quot;print&quot; command, e.g.:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print *eap</div>
If mouse pointer movements are working, Vim will also show a balloon when the<br>
mouse rests on text that can be evaluated by gdb.<br>
<br>
Now go back to the source window and put the cursor on the first line after<br>
the for loop, then type:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Break</div>
You will see a &quot;&gt;&gt;&quot; marker appear, this indicates the new breakpoint.&nbsp;&nbsp;Now<br>
click &quot;Cont&quot; in the toolbar and the code until the breakpoint will be<br>
executed.<br>
<br>
You can type more advanced commands in the gdb window.&nbsp;&nbsp;For example, type:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;watch curbuf</div>
Now click &quot;Cont&quot; in the toolbar (or type &quot;cont&quot; in the gdb window). Execution<br>
will now continue until the value of &quot;curbuf&quot; changes, which is in do_ecmd().<br>
To remove this watchpoint again type in the gdb window:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete 3</div>
<br>
You can see the stack by typing in the gdb window:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where</div>
Move through the stack frames, e.g. with:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frame 3</div>
The source window will show the code, at the point where the call was made to<br>
a deeper level.<br>
<br>
<br>
<span class="PreProc">Stepping through code</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-stepping" name="termdebug-stepping">termdebug-stepping</a><br>
Put focus on the gdb window to type commands there.&nbsp;&nbsp;Some common ones are:<br>
-&nbsp;<span class="Special">CTRL-C</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interrupt the program<br>
- next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute the current line and stop at the next line<br>
- step&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute the current line and stop at the next statement,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entering functions<br>
- finish&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute until leaving the current function<br>
- where&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; show the stack<br>
- frame&nbsp;<span class="Special">N</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; go to the&nbsp;<span class="Special">N</span>th stack frame<br>
- continue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue execution<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:Run" name=":Run">:Run</a>&nbsp;<a class="Constant" href="terminal.html#:Arguments" name=":Arguments">:Arguments</a><br>
In the window showing the source code these commands can be used to control<br>
gdb:<br>
&nbsp;<a class="Comment" href="terminal.html#:Run">:Run</a>&nbsp;<span class="Special">[args]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run the program with&nbsp;<span class="Special">[args]</span>&nbsp;or the previous arguments<br>
&nbsp;<a class="Comment" href="terminal.html#:Arguments">:Arguments</a>&nbsp;<span class="Special">{args}</span>&nbsp;&nbsp;set arguments for the next&nbsp;<a class="Comment" href="terminal.html#:Run">:Run</a><br>
<br>
&nbsp;<a class="Constant" href="terminal.html#:Break" name=":Break">:Break</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set a breakpoint at the current line; a sign will be displayed<br>
&nbsp;<a class="Constant" href="terminal.html#:Clear" name=":Clear">:Clear</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; delete the breakpoint at the current line<br>
<br>
&nbsp;<a class="Constant" href="terminal.html#:Step" name=":Step">:Step</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute the gdb &quot;step&quot; command<br>
&nbsp;<a class="Constant" href="terminal.html#:Over" name=":Over">:Over</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute the gdb &quot;next&quot; command (<a class="Comment" href="editing.html#:Next">:Next</a>&nbsp;is a Vim command)<br>
&nbsp;<a class="Constant" href="terminal.html#:Finish" name=":Finish">:Finish</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute the gdb &quot;finish&quot; command<br>
&nbsp;<a class="Constant" href="terminal.html#:Continue" name=":Continue">:Continue</a>&nbsp;&nbsp;&nbsp;&nbsp;execute the gdb &quot;continue&quot; command<br>
&nbsp;<a class="Constant" href="terminal.html#:Stop" name=":Stop">:Stop</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interrupt the program<br>
<br>
If&nbsp;<a class="Type" href="options.html#'mouse'">'mouse'</a>&nbsp;is set the plugin adds a window toolbar with these entries:<br>
&nbsp;&nbsp;Step&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Step">:Step</a><br>
&nbsp;&nbsp;Next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Over">:Over</a><br>
&nbsp;&nbsp;Finish&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Finish">:Finish</a><br>
&nbsp;&nbsp;Cont&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Continue">:Continue</a><br>
&nbsp;&nbsp;Stop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Stop">:Stop</a><br>
&nbsp;&nbsp;Eval&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Evaluate">:Evaluate</a><br>
This way you can use the mouse to perform the most common commands.&nbsp;&nbsp;You need<br>
to have the&nbsp;<a class="Type" href="options.html#'mouse'">'mouse'</a>&nbsp;option set to enable mouse clicks.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#:Winbar" name=":Winbar">:Winbar</a><br>
You can add the window toolbar in other windows you open with:<br>
<div class="helpExample">&nbsp;&nbsp;:Winbar</div>
<br>
If gdb stops at a source line and there is no window currently showing the<br>
source code, a new window will be created for the source code.&nbsp;&nbsp;This also<br>
happens if the buffer in the source code window has been modified and can't be<br>
abandoned.<br>
<br>
<br>
<span class="PreProc">Inspecting variables</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-variables" name="termdebug-variables">termdebug-variables</a>&nbsp;<a class="Constant" href="terminal.html#:Evaluate" name=":Evaluate">:Evaluate</a><br>
&nbsp;<a class="Comment" href="terminal.html#:Evaluate">:Evaluate</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evaluate the expression under the cursor<br>
&nbsp;<a class="Comment" href="various.html#K">K</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same<br>
&nbsp;<a class="Comment" href="terminal.html#:Evaluate">:Evaluate</a>&nbsp;<span class="Special">{expr}</span>&nbsp;&nbsp; evaluate&nbsp;<span class="Special">{expr}</span><br>
&nbsp;<span class="Comment">:'&lt;,'&gt;Evaluate</span>&nbsp;&nbsp;&nbsp;&nbsp; evaluate the Visually selected text<br>
<br>
This is similar to using &quot;print&quot; in the gdb window.<br>
You can usually shorten&nbsp;<a class="Comment" href="terminal.html#:Evaluate">:Evaluate</a>&nbsp;to&nbsp;<span class="Comment">:Ev</span>.<br>
<br>
<br>
<span class="PreProc">Other commands</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-commands" name="termdebug-commands">termdebug-commands</a><br>
&nbsp;<a class="Constant" href="terminal.html#:Gdb" name=":Gdb">:Gdb</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jump to the gdb window<br>
&nbsp;<a class="Constant" href="terminal.html#:Program" name=":Program">:Program</a>&nbsp;&nbsp;&nbsp;&nbsp;jump to the window with the running program<br>
&nbsp;<a class="Constant" href="terminal.html#:Source" name=":Source">:Source</a>&nbsp;&nbsp;&nbsp;&nbsp; jump to the window with the source code, create it if there<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isn't one<br>
<br>
<br>
<span class="PreProc">Communication</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-communication" name="termdebug-communication">termdebug-communication</a><br>
There is another, hidden, buffer, which is used for Vim to communicate with<br>
gdb.&nbsp;&nbsp;The buffer name is &quot;gdb communication&quot;.&nbsp;&nbsp;Do not delete this buffer, it<br>
will break the debugger.<br>
<br>
<br>
<span class="PreProc">Customizing</span><br>
<br>
GDB command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug-customizing" name="termdebug-customizing">termdebug-customizing</a><br>
<br>
To change the name of the gdb command, set the &quot;termdebugger&quot; variable before<br>
invoking&nbsp;<a class="Comment" href="terminal.html#:Termdebug">:Termdebug</a>:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let termdebugger = &quot;mygdb&quot;</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#gdb-version" name="gdb-version">gdb-version</a><br>
Only debuggers fully compatible with gdb will work.&nbsp;&nbsp;Vim uses the GDB/MI<br>
interface.&nbsp;&nbsp;The &quot;new-ui&quot; command&nbsp;&nbsp;requires gdb version 7.12 or later.&nbsp;&nbsp;if you<br>
get this error:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Undefined command: &quot;new-ui&quot;. Try &quot;help&quot;.</span><br>
Then your gdb is too old.<br>
<br>
<br>
Colors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#hl-debugPC" name="hl-debugPC">hl-debugPC</a>&nbsp;<a class="Constant" href="terminal.html#hl-debugBreakpoint" name="hl-debugBreakpoint">hl-debugBreakpoint</a><br>
<br>
The color of the signs can be adjusted with these highlight groups:<br>
- debugPC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the current position<br>
- debugBreakpoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a breakpoint<br>
<br>
The defaults are, when&nbsp;<a class="Type" href="options.html#'background'">'background'</a>&nbsp;is &quot;light&quot;:<br>
&nbsp;&nbsp;hi debugPC term=reverse ctermbg=lightblue guibg=lightblue<br>
&nbsp;&nbsp;hi debugBreakpoint term=reverse ctermbg=red guibg=red<br>
<br>
When&nbsp;<a class="Type" href="options.html#'background'">'background'</a>&nbsp;is &quot;dark&quot;:<br>
&nbsp;&nbsp;hi debugPC term=reverse ctermbg=darkblue guibg=darkblue<br>
&nbsp;&nbsp;hi debugBreakpoint term=reverse ctermbg=red guibg=red<br>
<br>
<br>
Popup menu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug_popup" name="termdebug_popup">termdebug_popup</a><br>
<br>
By default the Termdebug plugin sets&nbsp;<a class="Type" href="options.html#'mousemodel'">'mousemodel'</a>&nbsp;to &quot;popup_setpos&quot; and adds<br>
these entries to the popup menu:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set breakpoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Break">:Break</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clear breakpoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Clear">:Clear</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evaluate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Comment" href="terminal.html#:Evaluate">:Evaluate</a><br>
If you don't want this then disable it with:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let g:termdebug_popup = 0</div>
<br>
<br>
Vim window width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="terminal.html#termdebug_wide" name="termdebug_wide">termdebug_wide</a><br>
<br>
To change the width of the Vim window when debugging starts, and use a<br>
vertical split:<br>
<div class="helpExample">&nbsp;&nbsp;let g:termdebug_wide = 163</div>
This will set &amp;columns to 163 when :Termdebug is used.&nbsp;&nbsp;The value is restored<br>
when quitting the debugger.<br>
If g:termdebug_wide is set and &amp;Columns is already&nbsp;&nbsp;larger than<br>
g:termdebug_wide then a vertical split will be used without changing &amp;columns.<br>
Set it to 1 to get a vertical split without every changing &amp;columns (useful<br>
for when the terminal can't be resized by Vim).<br>
<br>
<br>
<br>
&nbsp;vim:tw=78:ts=8:ft=help:norl:<br>
</div>
