---
layout: vimdoc
helpname: 'usr_32'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_32.html" name="usr_32.txt">usr_32.txt</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim version 8.2.</span>&nbsp;&nbsp;Last change: 2010 Jul 20<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The undo tree<br>
<br>
<br>
Vim provides multi-level undo.&nbsp;&nbsp;If you undo a few changes and then make a new<br>
change you create a branch in the undo tree.&nbsp;&nbsp;This text is about moving<br>
through the branches.<br>
<br>
<a class="Identifier" href="usr_32.html#32.1">32.1</a>&nbsp;&nbsp;Undo up to a file write<br>
<a class="Identifier" href="usr_32.html#32.2">32.2</a>&nbsp;&nbsp;Numbering changes<br>
<a class="Identifier" href="usr_32.html#32.3">32.3</a>&nbsp;&nbsp;Jumping around the tree<br>
<a class="Identifier" href="usr_32.html#32.4">32.4</a>&nbsp;&nbsp;Time travelling<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp; Next chapter:&nbsp;<a class="Identifier" href="usr_40.html">usr_40.txt</a>&nbsp;&nbsp;Make new commands<br>
&nbsp;Previous chapter:&nbsp;<a class="Identifier" href="usr_31.html">usr_31.txt</a>&nbsp;&nbsp;Exploiting the GUI<br>
Table of contents:&nbsp;<a class="Identifier" href="usr_toc.html">usr_toc.txt</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_32.html#32.1" name="32.1">32.1</a>&nbsp;&nbsp;Undo up to a file write<br>
<br>
Sometimes you make several changes, and then discover you want to go back to<br>
when you have last written the file.&nbsp;&nbsp;You can do that with this command:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:earlier 1f</div>
<br>
The &quot;f&quot; stands for &quot;file&quot; here.<br>
<br>
You can repeat this command to go further back in the past.&nbsp;&nbsp;Or use a count<br>
different from 1 to go back faster.<br>
<br>
If you go back too far, go forward again with:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:later 1f</div>
<br>
<span class="Todo">Note</span>&nbsp;that these commands really work in time sequence.&nbsp;&nbsp;This matters if you<br>
made changes after undoing some changes.&nbsp;&nbsp;It's explained in the next section.<br>
<br>
Also&nbsp;<span class="Todo">note</span>&nbsp;that we are talking about text writes here.&nbsp;&nbsp;For writing the undo<br>
information in a file see&nbsp;<a class="Identifier" href="undo.html#undo-persistence">undo-persistence</a>.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_32.html#32.2" name="32.2">32.2</a>&nbsp;&nbsp;Numbering changes<br>
<br>
In section&nbsp;<a class="Identifier" href="usr_02.html#02.5">02.5</a>&nbsp;we only discussed one line of undo/redo.&nbsp;&nbsp;But it is also<br>
possible to branch off.&nbsp;&nbsp;This happens when you undo a few changes and then<br>
make a new change.&nbsp;&nbsp;The new changes become a branch in the undo tree.<br>
<br>
Let's start with the text &quot;one&quot;.&nbsp;&nbsp;The first change to make is to append<br>
&quot; too&quot;.&nbsp;&nbsp;And then move to the first 'o' and change it into 'w'.&nbsp;&nbsp;We then have<br>
two changes, numbered 1 and 2, and three states of the text:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change 2<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one two</span><br>
<br>
If we now undo one change, back to &quot;one too&quot;, and change &quot;one&quot; to &quot;me&quot; we<br>
create a branch in the undo tree:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp; \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change 2&nbsp;&nbsp;change 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one two&nbsp;&nbsp;&nbsp;&nbsp;me too</span><br>
<br>
You can now use the&nbsp;<a class="Identifier" href="undo.html#u">u</a>&nbsp;command to undo.&nbsp;&nbsp;If you do this twice you get to<br>
&quot;one&quot;.&nbsp;&nbsp;Use&nbsp;<a class="Identifier" href="undo.html#CTRL-R">CTRL-R</a>&nbsp;to redo, and you will go to &quot;one too&quot;.&nbsp;&nbsp;One more&nbsp;<a class="Identifier" href="undo.html#CTRL-R">CTRL-R</a><br>
takes you to &quot;me too&quot;.&nbsp;&nbsp;Thus undo and redo go up and down in the tree, using<br>
the branch that was last used.<br>
<br>
What matters here is the order in which the changes are made.&nbsp;&nbsp;Undo and redo<br>
are not considered changes in this context.&nbsp;&nbsp;After each change you have a new<br>
state of the text.<br>
<br>
<span class="Todo">Note</span>&nbsp;that only the changes are numbered, the text shown in the tree above has<br>
no identifier.&nbsp;&nbsp;They are mostly referred to by the number of the change above<br>
it.&nbsp;&nbsp;But sometimes by the number of one of the changes below it, especially<br>
when moving up in the tree, so that you know which change was just undone.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_32.html#32.3" name="32.3">32.3</a>&nbsp;&nbsp;Jumping around the tree<br>
<br>
So how do you get to &quot;one two&quot; now?&nbsp;&nbsp;You can use this command:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:undo 2</div>
<br>
The text is now &quot;one two&quot;, you are below change 2.&nbsp;&nbsp;You can use the&nbsp;<a class="Identifier" href="undo.html#:undo">:undo</a><br>
command to jump to below any change in the tree.<br>
<br>
Now make another change: change &quot;one&quot; to &quot;not&quot;:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp; \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change 2&nbsp;&nbsp;change 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one two&nbsp;&nbsp;&nbsp;&nbsp;me too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change 4<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">not two</span><br>
<br>
Now you change your mind and want to go back to &quot;me too&quot;.&nbsp;&nbsp;Use the&nbsp;<a class="Identifier" href="undo.html#g-">g-</a><br>
command.&nbsp;&nbsp;This moves back in time.&nbsp;&nbsp;Thus it doesn't walk the tree upwards or<br>
downwards, but goes to the change made before.<br>
<br>
You can repeat&nbsp;<a class="Identifier" href="undo.html#g-">g-</a>&nbsp;and you will see the text change:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">me too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one two</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one</span><br>
<br>
Use&nbsp;<a class="Identifier" href="undo.html#g+">g+</a>&nbsp;to move forward in time:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">one two</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">me too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">not two</span><br>
<br>
Using&nbsp;<a class="Identifier" href="undo.html#:undo">:undo</a>&nbsp;is useful if you know what change you want to jump to.&nbsp;&nbsp;<a class="Identifier" href="undo.html#g-">g-</a>&nbsp;and<br>
<a class="Identifier" href="undo.html#g+">g+</a>&nbsp;are useful if you don't know exactly what the change number is.<br>
<br>
You can type a count before&nbsp;<a class="Identifier" href="undo.html#g-">g-</a>&nbsp;and&nbsp;<a class="Identifier" href="undo.html#g+">g+</a>&nbsp;to repeat them.<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_32.html#32.4" name="32.4">32.4</a>&nbsp;&nbsp;Time travelling<br>
<br>
When you have been working on text for a while the tree grows to become big.<br>
Then you may want to go to the text of some minutes ago.<br>
<br>
To see what branches there are in the undo tree use this command:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:undolist</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">number changes&nbsp;&nbsp;time</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;16 seconds ago<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;5 seconds ago<br>
<br>
Here you can see the number of the leaves in each branch and when the change<br>
was made.&nbsp;&nbsp;Assuming we are below change 4, at &quot;not two&quot;, you can go back ten<br>
seconds with this command:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:earlier 10s</div>
<br>
Depending on how much time you took for the changes you end up at a certain<br>
position in the tree.&nbsp;&nbsp;The&nbsp;<a class="Identifier" href="undo.html#:earlier">:earlier</a>&nbsp;command argument can be &quot;m&quot; for minutes,<br>
&quot;h&quot; for hours and &quot;d&quot; for days.&nbsp;&nbsp;To go all the way back use a big number:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:earlier 100d</div>
<br>
To travel forward in time again use the&nbsp;<a class="Identifier" href="undo.html#:later">:later</a>&nbsp;command:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:later 1m</div>
<br>
The arguments are &quot;s&quot;, &quot;m&quot; and &quot;h&quot;, just like with&nbsp;<a class="Identifier" href="undo.html#:earlier">:earlier</a>.<br>
<br>
If you want even more details, or want to manipulate the information, you can<br>
use the&nbsp;<a class="Identifier" href="eval.html#undotree()">undotree()</a>&nbsp;function.&nbsp;&nbsp;To see what it returns:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:echo undotree()</div>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
Next chapter:&nbsp;<a class="Identifier" href="usr_40.html">usr_40.txt</a>&nbsp;&nbsp;Make new commands<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">manual-copyright</a>&nbsp;&nbsp;vim:tw=78:ts=8:noet:ft=help:norl:<br>
</div>
